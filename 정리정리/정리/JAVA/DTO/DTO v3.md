### **DTO (Data Transfer Object) μ •λ¦¬λ³Έ**

#### **DTOλ€?**
DTOλ” **Data Transfer Object**μ μ•½μλ΅, **κ³„μΈµ κ°„ λ°μ΄ν„° μ „λ‹¬μ„ μ„ν• κ°μ²΄**μ…λ‹λ‹¤. λ°μ΄ν„°λ¥Ό λ‹¨μν μ „λ‹¬ν•λ” μ—­ν• μ„ ν•λ©°, μ£Όλ΅ **μ»¨νΈλ΅¤λ¬μ™€ μ„λΉ„μ¤ κ³„μΈµ**, νΉμ€ **ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„**μ λ°μ΄ν„° κµν™μ„ λ‹¨μν™”ν•κ³  ν¨μ¨μ μΌλ΅ μν–‰ν•κΈ° μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤.

---

#### **DTOλ¥Ό μ‚¬μ©ν•λ” μ΄μ **
1. **μ—”ν‹°ν‹°(Entity) λ³΄νΈ**
    - λ°μ΄ν„°λ² μ΄μ¤μ™€ μ§μ ‘ μ—°κ΄€λ μ—”ν‹°ν‹°λ¥Ό μ™Έλ¶€μ— λ…Έμ¶ν•μ§€ μ•μμΌλ΅μ¨ λ³΄μ• λ° λ°μ΄ν„° λ¬΄κ²°μ„±μ„ μ μ§€.
2. **API μ¤ν™ λ³΄νΈ**
    - λ„λ©”μΈ λ¨λΈμ λ³€κ²½μΌλ΅λ¶€ν„° API μ¤ν™μ„ λ¶„λ¦¬ν•κ³  μ•μ •μ„±μ„ λ³΄μ¥.
3. **λ„¤νΈμ›ν¬ νΈλν”½ μ κ°**
    - ν•„μ”ν• λ°μ΄ν„°λ§ ν¬ν•¨ν•΄ μ „μ†΅ λΉ„μ©μ„ μ¤„μ„.
4. **μν™ μ°Έμ΅° λ¬Έμ  λ°©μ§€**
    - μ–‘λ°©ν–¥ μ—°κ΄€ κ΄€κ³„λ΅ μΈν•΄ λ°μƒν•  μ μλ” μν™ μ°Έμ΅° λ¬Έμ λ¥Ό λ°©μ§€.
5. **μ μ—°ν• λ°μ΄ν„° κµ¬μ΅° μ κ³µ**
    - API μ”κµ¬μ‚¬ν•­μ— λ§μ¶ λ§μ¶¤ν• λ°μ΄ν„° κµ¬μ΅° μ„¤κ³„ κ°€λ¥.

---

#### **Entity vs DTO**

| **νΉμ§•**     | **Entity**            | **DTO**              |
| ---------- | --------------------- | -------------------- |
| **λ©μ **     | λ°μ΄ν„°λ² μ΄μ¤ λ§¤ν•‘             | λ°μ΄ν„° μ „λ‹¬ μ „μ©            |
| **μ—­ν• **     | λ°μ΄ν„°μ μμ†μ„± κ΄€λ¦¬           | κ³„μΈµ κ°„ λ°μ΄ν„° μ „λ‹¬          |
| **λ‚΄μ© ν¬ν•¨**  | λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ ¨ μ •λ³΄μ™€ λΉ„μ¦λ‹μ¤ λ΅μ§ | ν•„μ”ν• λ°μ΄ν„°λ§ ν¬ν•¨          |
| **κ°€λ³€μ„±**    | Mutable               | Mutable λλ” Immutable |
| **μ§λ ¬ν™” μ—¬λ¶€** | κ°€λ¥                    | κ°€λ¥                   |

---
#### **DTOμ μΆ…λ¥**
1. **Request DTO**
    - ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•  λ• μ‚¬μ©.
    - μ£Όλ΅ `@RequestBody`μ™€ ν•¨κ» μ‚¬μ©λλ©° λ°μ΄ν„° μ ν¨μ„± κ²€μ¦ μ–΄λ…Έν…μ΄μ… ν¬ν•¨.
    - `@NoArgsConstructor` ν•„μ”.
2. **Response DTO**
    - μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ λ°μ΄ν„°λ¥Ό λ°ν™ν•  λ• μ‚¬μ©.
    - λ―Όκ°ν• μ •λ³΄λ¥Ό μ μ™Έν•κ³  ν•„μ”ν• μ •λ³΄λ§ ν¬ν•¨.
    - μ—¬λ¬ μ—”ν‹°ν‹° λ°μ΄ν„°λ¥Ό μ΅°ν•©ν•μ—¬ λ°ν™ κ°€λ¥.
    - λ°μ΄ν„° μ•μ „μ„±μ„ μ„ν•΄ `final` ν•„λ“λ¥Ό μμ£Ό μ‚¬μ©.

---

#### **DTO μ‘μ„± λ°©λ²•**
1. **Builder ν¨ν„΄**
    - λ³µμ΅ν• κ°μ²΄ μƒμ„± κ³Όμ •μ„ λ‹¨μν™”ν•κ³  μ„ νƒμ  λ§¤κ°λ³€μλ¥Ό μ‰½κ² μ²λ¦¬.
    - `Lombok`μ `@Builder`λ¥Ό μ‚¬μ©ν•μ—¬ μ½”λ“ κ°€λ…μ„± ν–¥μƒ.
```java
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class UserCreateRequestDto {
    private String name;
    private String email;
}

// μ‚¬μ©λ²•
User user = User.builder()
    .name("μ΄λ¦„")
    .email("μ΄λ©”μΌ")
    .build();

```
- **νΉμ§•**
    - λ³µμ΅ν• κ°μ²΄ μƒμ„± κ³Όμ •μ„ λ‹¨μν™”ν•μ—¬ κ°€λ…μ„±μ„ λ†’μ„.
    - μ„ νƒμ  λ§¤κ°λ³€μ μ²λ¦¬κ°€ μ©μ΄ν•λ©°, ν•„μκ°’κ³Ό μ„ νƒκ°’μ„ λ…ν™•ν κµ¬λ¶„ κ°€λ¥.
    - κ° λ§¤κ°λ³€μμ μλ―Έλ¥Ό λ…ν™•ν ν‘ν„ν•  μ μμ–΄, μ½”λ“μ μ μ§€λ³΄μμ„±μ΄ ν–¥μƒλ¨.
    - `Lombok`μ `@Builder`λ¥Ό μ‚¬μ©ν•μ—¬ μ†μ‰½κ² κµ¬ν„ κ°€λ¥.
- **μ¥μ **
    - **κ°€λ…μ„±**  
	    μƒμ„± μ‹ κ° ν•„λ“κ°€ μ–΄λ–¤ κ°’μ„ μλ―Έν•λ”μ§€ λ…ν™•ν μ• μ μμ.
    - **μ•μ •μ„±**
	    - κ°μ²΄ μƒμ„± μ‹ ν•„μ”ν• ν•„λ“λ§ μ„¤μ •ν•μ—¬ λ¶μ™„μ „ν• κ°μ²΄ μƒμ„±μ„ λ°©μ§€.
	    - `Immutable` κ°μ²΄λ¥Ό μ‰½κ² μ„¤κ³„ν•  μ μμ.
	- **μ μ—°μ„±**
	    - ν•„μ ν•„λ“μ™€ μ„ νƒμ  ν•„λ“λ¥Ό μ‰½κ² κµ¬λ¶„.
	    - ν•„μ”μ— λ”°λΌ λΉλ” λ©”μ„λ“λ¥Ό μ¶”κ°€ν•΄ λ‹¤μ–‘ν• μƒμ„± μ”κµ¬μ‚¬ν•­μ„ μ²λ¦¬ κ°€λ¥.

2. **μ •μ  ν©ν† λ¦¬ λ©”μ„λ“ ν¨ν„΄**
    
    - κ°μ²΄ μƒμ„±μ„ μΊ΅μν™”ν•λ©°, λ…ν™•ν• λ©”μ„λ“ μ΄λ¦„μΌλ΅ μλ„λ¥Ό ν‘ν„.
    - μ¶”κ°€μ μΈ κ²€μ¦ λ° λ°μ΄ν„° λ³€ν™ λ΅μ§μ„ ν¬ν•¨ κ°€λ¥.
```java
@Getter
@Builder
public class UserResponseDto {
    private final Long id;
    private final String name;
    private final String email;

    public static UserResponseDto from(User user) {
        return UserResponseDto.builder()
            .id(user.getId())
            .name(user.getName())
            .email(user.getEmail())
            .build();
    }
}

// μ‚¬μ©λ²•
UserResponseDto dto = UserResponseDto.from(user);
```
- **νΉμ§•**
    - κ°μ²΄ μƒμ„± λ΅μ§μ„ μΊ΅μν™”ν•λ©°, `static` λ©”μ„λ“λ¥Ό ν†µν•΄ κ°μ²΄ μƒμ„±.
    - μƒμ„±μ λ€μ‹  μ΄λ¦„μ΄ λ…ν™•ν• λ©”μ„λ“(`from()`, `of()`, `valueOf()`)λ΅ μλ„λ¥Ό ν‘ν„.
    - λ°μ΄ν„° λ³€ν™, κ²€μ¦, μ¶”κ°€ λ΅μ§ λ“±μ„ κ°μ²΄ μƒμ„± μ‹μ μ— ν¬ν•¨ν•  μ μμ.
    - λ¶μ™„μ „ν• κ°μ²΄ μƒμ„±μ„ λ°©μ§€ν•λ©°, μΊμ‹±μ΄λ‚ κ°μ²΄ ν’€λ§μ„ μ§€μ› κ°€λ¥.
- **μ¥μ **
    - **μλ„ ν‘ν„**  
	    - λ©”μ„λ“ μ΄λ¦„μ„ ν†µν•΄ κ°μ²΄ μƒμ„±μ λ©μ μ„ λ…ν™•ν μ „λ‹¬ κ°€λ¥.
		    - μ)`from()` , `of()`
    - **κ°μ²΄ μƒμ„±μ μΊ΅μν™”**
	    - μƒμ„±μλ¥Ό λ…Έμ¶ν•μ§€ μ•μ•„ κ°μ²΄ μƒμ„± λ΅μ§μ„ ν•κ³³μ— μ§‘μ¤‘.
	    - μƒμ„± μ‹ ν•„μ”ν• κ²€μ¦ λ΅μ§μ΄λ‚ μ¶”κ°€ μ‘μ—…μ„ ν¬ν•¨ κ°€λ¥.
		    - DTOλ¥Ό μƒμ„±ν•λ” κ³Όμ •μ—μ„ μ¶”κ°€μ μΈ κ²€μ¦μ΄λ‚ λ°μ΄ν„° λ³€ν™ λ΅μ§μ΄ ν•„μ”ν• 
	          κ²½μ° μƒμ„±μ λ€μ‹  ν©ν† λ¦¬ λ©”μ„λ“μ— λ΅μ§μ„ λ„£μ„ μ μλ‹¤.
        - νΈμ¶ν•  λ•λ§λ‹¤ μƒλ΅μ΄ κ°μ²΄λ¥Ό μƒμ„±ν•  ν•„μ”κ°€ μ—†λ‹¤. (μΊμ‹±, κ°μ²΄ ν’€λ§ λ“± κ°€λ¥)
	- **κ°μ²΄ μƒμ„±μ μ μ—°μ„±**
	    - μƒμ„± μ‹ ν•μ„ ν΄λμ¤λ‚ λ³€ν•λ κ°μ²΄ λ°ν™ κ°€λ¥.
	    - μ: κ°™μ€ λ°μ΄ν„°λ΅ API μ”μ²­/μ‘λ‹µ μ”κµ¬μ‚¬ν•­μ— λ§λ” DTO λ°ν™
		    -  μ) `κ²°μ ` κ°μ²΄μ— λ€ν• μƒμ„±μ„ ν•μ€μ„ λ• `OOκ²°μ ` μΈμ¤ν„΄μ¤ λ°ν™.
		- μ •μ  ν©ν† λ¦¬ λ©”μ„λ“ ν¨ν„΄μ **κ°μ²΄ μƒμ„±μ μ μ—°μ„±**μ€ λ‹¤μ–‘ν• κ°μ²΄λ¥Ό **μƒν™©μ— λ”°λΌ μ ν•©ν•κ² μƒμ„±**ν•  μ μλ‹¤λ” μ μ—μ„ μ¤λ” νΉμ§•μ…λ‹λ‹¤. μ•„λμ—μ„ λ” κµ¬μ²΄μ μΌλ΅ μ„¤λ…ν•κ² μµλ‹λ‹¤.
1. **μ΄λ¦„μ„ κ°€μ§„ λ©”μ„λ“λ΅ λ©μ μ„ λ…ν™•ν ν‘ν„ κ°€λ¥**
    - μƒμ„±μλ” μ΄λ¦„μ„ κ°€μ§ μ μ—†μ§€λ§, μ •μ  ν©ν† λ¦¬ λ©”μ„λ“λ” μ΄λ¦„μ„ κ°€μ§ μ μμµλ‹λ‹¤.
    - κ°™μ€ ν΄λμ¤μ—μ„ **λ‹¤μ–‘ν• μλ„**λ΅ κ°μ²΄λ¥Ό μƒμ„±ν•  λ• λ©”μ„λ“ μ΄λ¦„μΌλ΅ λ©μ μ„ ν‘ν„ν•  μ μμµλ‹λ‹¤.
    - μ:
	```java
	public class User {
	    private String name;
	    private String email;
	
	    private User(String name, String email) {
	        this.name = name;
	        this.email = email;
	    }
	
	    // μ •μ  ν©ν† λ¦¬ λ©”μ„λ“
	    public static User fromName(String name) {
	        return new User(name, null);
	    }
	
	    public static User fromEmail(String email) {
	        return new User(null, email);
	    }
	}
	```
- `fromName()`μ€ μ΄λ¦„ κΈ°λ°μΌλ΅, `fromEmail()`μ€ μ΄λ©”μΌ κΈ°λ°μΌλ΅ κ°μ²΄λ¥Ό μƒμ„±.
- μ΄λ ‡κ² λ©”μ„λ“ μ΄λ¦„μΌλ΅ κ°μ²΄ μƒμ„± μλ„λ¥Ό λ…ν™•ν ν‘ν„ κ°€λ¥.
---

2. **λ‹¤λ¥Έ μλ£ν• κ°μ²΄λ¥Ό λ°ν™ κ°€λ¥**
    - μ •μ  ν©ν† λ¦¬ λ©”μ„λ“λ” λ°ν™ νƒ€μ…μΌλ΅ λ°λ“μ‹ μκΈ° μμ‹ μ ν΄λμ¤μΌ ν•„μ”κ°€ μ—†μµλ‹λ‹¤.
    - **μƒμ„ ν΄λμ¤λ‚ μΈν„°νμ΄μ¤λ¥Ό λ°ν™**ν•κ³ , μ‹¤μ  κµ¬ν„μ€ μƒν™©μ— λ”°λΌ λ‹¬λΌμ§ μ μμµλ‹λ‹¤.
    - μ:
	```java
	public interface Payment {
	    void pay();
	}
	
	public class CreditCardPayment implements Payment {
	    @Override
	    public void pay() {
	        System.out.println("Paying with Credit Card");
	    }
	}
	
	public class PayPalPayment implements Payment {
	    @Override
	    public void pay() {
	        System.out.println("Paying with PayPal");
	    }
	}
	
	public class PaymentFactory {
	    public static Payment createPayment(String type) {
	        if (type.equalsIgnoreCase("credit")) {
	            return new CreditCardPayment();
	        } else if (type.equalsIgnoreCase("paypal")) {
	            return new PayPalPayment();
	        }
	        throw new IllegalArgumentException("Unknown payment type");
	    }
	}
	
	public class Main {
	    public static void main(String[] args) {
	        Payment payment = PaymentFactory.createPayment("credit");
	        payment.pay(); // Output: Paying with Credit Card
	    }
	}
	```
 - `PaymentFactory.createPayment()`μ€ `Payment` μΈν„°νμ΄μ¤λ¥Ό λ°ν™ν•μ§€λ§, μ‹¤μ λ΅λ” μƒν™©μ— λ”°λΌ `CreditCardPayment`λ‚ `PayPalPayment` κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
- μ΄ μ μ—°μ„± λ•λ¶„μ— ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” κµ¬ν„ μ„Έλ¶€ μ‚¬ν•­μ„ μ• ν•„μ”κ°€ μ—†μµλ‹λ‹¤.

---

3. **μ¶”κ°€ λ΅μ§μ΄λ‚ λ³€ν™μ„ ν¬ν•¨ν• κ°μ²΄ μƒμ„±**
    - μ •μ  ν©ν† λ¦¬ λ©”μ„λ“λ” λ‹¨μν κ°μ²΄λ¥Ό μƒμ„±ν•λ” λ° κ·ΈμΉμ§€ μ•κ³ , μƒμ„± κ³Όμ •μ—μ„ μ¶”κ°€μ μΈ λ΅μ§μ„ μν–‰ν•κ±°λ‚ λ°μ΄ν„°λ¥Ό λ³€ν™ν•  μ μμµλ‹λ‹¤.
        
    - μ:
	```java
	public class User {
	    private String username;
	    private int age;
	
	    private User(String username, int age) {
	        this.username = username;
	        this.age = age;
	    }
	
	    public static User from(String username, String ageString) {
	        int age = Integer.parseInt(ageString); // λ¬Έμμ—΄μ„ μ •μλ΅ λ³€ν™
	        if (age < 0) {
	            throw new IllegalArgumentException("Age cannot be negative");
	        }
	        return new User(username, age);
	    } 
	}

	public class Main {
	    public static void main(String[] args) {
	        User user = User.from("Alice", "25");
	        // μ •μ  ν©ν† λ¦¬ λ©”μ„λ“ λ‚΄μ—μ„ age λ³€ν™ λ° κ²€μ¦ λ΅μ§ μν–‰
	    }
	}       
	```
- `User.from()`μ—μ„ λ¬Έμμ—΄ `ageString`μ„ μ •μλ΅ λ³€ν™ν•κ³ , μμ κ°’μΈμ§€ κ²€μ¦ν• λ’¤ κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
- μ΄λ° μ μ—°ν• μƒμ„± λ΅μ§μ€ μ •μ  ν©ν† λ¦¬ λ©”μ„λ“λ§μ΄ μ κ³µν•  μ μμµλ‹λ‹¤.

---

### **μ¥μ  μ”μ•½**
- **λ‹¤μ–‘ν• κ°μ²΄ μƒμ„± λ°©μ‹ μ κ³µ**: μƒν™©μ— λ”°λΌ μ ν•©ν• κ°μ²΄λ¥Ό λ°ν™ κ°€λ¥ (μ: λ‹¤ν•μ„± ν™μ©).
- **λ…ν™•ν• μλ„ ν‘ν„**: λ©”μ„λ“ μ΄λ¦„μΌλ΅ κ°μ²΄ μƒμ„± λ©μ μ„ μ‰½κ² μ΄ν•΄ν•  μ μμ.
- **μ¶”κ°€ λ΅μ§ ν¬ν•¨ κ°€λ¥**: μƒμ„±μμ—μ„λ” ν•  μ μ—†λ” λ°μ΄ν„° κ²€μ¦μ΄λ‚ λ³€ν™ κ°™μ€ λ΅μ§μ„ ν¬ν•¨ κ°€λ¥.

μ΄ λ¨λ“  κ²ƒμ΄ **κ°μ²΄ μƒμ„±μ μ μ—°μ„±**μΌλ΅ μ„¤λ…λ©λ‹λ‹¤. μ΄ν•΄λμ—λ‚μ”? π
	- **λ¬΄κ²°μ„± λ³΄μ¥**
	    - μƒμ„±μλ¥Ό `private`μΌλ΅ μ§€μ •ν•΄ μλ»λ μƒνƒλ΅ κ°μ²΄ μƒμ„±μ΄ λ°©μ§€λ¨.
	    - DTO λ‚΄λ¶€μ λ΅μ§μΌλ΅ μ•μ „ν•κ³  μΌκ΄€λ κ°μ²΄λ¥Ό μƒμ„±.
	    - κ°μ²΄ μƒμ„± μ‹μ μ— μ¶”κ°€μ μΈ κ²€μ¦ λ΅μ§μ„ μν–‰ν•  μ μλ‹¤.
---

#### **DTO ν™μ© μ‹ μ£Όμμ‚¬ν•­**
1. **DTOμ™€ μ—”ν‹°ν‹° κ°„ λ³€ν™**
    - DTOμ™€ μ—”ν‹°ν‹° κ°„ λ³€ν™ λ΅μ§μ€ μμ‘μ—…μΌλ΅ κµ¬ν„ν•κ±°λ‚ `ModelMapper`, `MapStruct` κ°™μ€ λΌμ΄λΈλ¬λ¦¬λ¥Ό ν™μ©.
2. **λ³µμ΅ν• μ„¤κ³„**
    - λ°μ΄ν„° μ”κµ¬μ‚¬ν•­μ— λ§μ¶° DTOλ¥Ό μ„¤κ³„ν•λ” λ° μ‹κ°„μ΄ μ†μ”λ  μ μμ.
3. **κ°μ²΄ λ¶λ³€μ„± μ μ§€**
    - κ°€λ¥ν•λ©΄ Immutable κ°μ²΄λ΅ μ„¤κ³„ν•μ—¬ λ°μ΄ν„° λ¬΄κ²°μ„±μ„ λ³΄μ¥.

---
#### **μ”μ•½**
DTOλ” λ°μ΄ν„°λ¥Ό λ‹¨μν μ „λ‹¬ν•κΈ° μ„ν• κ°μ²΄λ΅, μ—”ν‹°ν‹°μ™€ λ¶„λ¦¬ν•μ—¬ κ³„μΈµ κ°„ λ°μ΄ν„°λ¥Ό μ•μ „ν•κ³  ν¨μ¨μ μΌλ΅ κµν™ν•  μ μλ„λ΅ μ„¤κ³„λ©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ³΄μ•, μ μ—°μ„±, λ„¤νΈμ›ν¬ ν¨μ¨μ„±μ„ λ¨λ‘ κ°μ„ ν•  μ μμµλ‹λ‹¤. `Builder ν¨ν„΄`κ³Ό `μ •μ  ν©ν† λ¦¬ λ©”μ„λ“`λ” DTO μ„¤κ³„μ™€ ν™μ©μ—μ„ μμ£Ό μ‚¬μ©ν•λ” μ ‘κ·Ό λ°©μ‹μ…λ‹λ‹¤.
- **Builder ν¨ν„΄**μ€ λ³µμ΅ν• κ°μ²΄λ¥Ό λ…ν™•ν•κ³  μ§κ΄€μ μΌλ΅ μƒμ„±ν•  μ μμ–΄, κ°€λ…μ„±μ΄ μ¤‘μ”ν• κ²½μ° μ μ©ν•©λ‹λ‹¤. νΉν ν•„μκ°’κ³Ό μ„ νƒκ°’μ„ μ‰½κ² μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
- **μ •μ  ν©ν† λ¦¬ λ©”μ„λ“**λ” κ°μ²΄ μƒμ„± λ΅μ§μ„ μΊ΅μν™”ν•κ³ , μ¶”κ°€ κ²€μ¦κ³Ό λ°μ΄ν„° λ³€ν™ λ΅μ§μ„ ν¬ν•¨ν•κΈ°μ— μ ν•©ν•©λ‹λ‹¤. λ…ν™•ν• λ©”μ„λ“ μ΄λ¦„μΌλ΅ μλ„λ¥Ό μ „λ‹¬ν•λ©°, λ‹¤μ–‘ν• μƒμ„± μ”κµ¬μ‚¬ν•­μ„ μ²λ¦¬ν•  μ μμµλ‹λ‹¤.